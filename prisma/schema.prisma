generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum EmpressoraStatus {
    ATIVA
    DESATIVA
}

enum Cargo {
    USER
    ADMIN
}

model User {
    id    String     @id @default(cuid())
    email String  @unique @db.VarChar(256)
    nome  String? @db.VarChar(256)
    senha String @db.VarChar(64)
    documento String @db.VarChar(14)
    lotacao_id String @db.VarChar(256)
    impressoes Impressao[]
    cargos Cargo[] @default([USER])
    lotacao Lotacao  @relation(fields: [lotacao_id], references: [id])
    @@map("users")
}

model Lotacao {
    id String @id @default(cuid())
    nome String @unique @db.VarChar(256)
    rua String @db.VarChar(256)
    logradouro String @db.VarChar(256)
    complemento String @db.VarChar(256)
    bairro String @db.VarChar(256)
    cidade String @db.VarChar(256)
    cep String @db.VarChar(256)
    numero Int
    usuarios User[]
    @@map("lotacoes")
}

model Impressora {
    id String @id @default(cuid())
    endereco_ip String @db.VarChar(256)
    modelo String @db.VarChar(256)
    localizacao String @db.VarChar(256)
    marca String @db.VarChar(256)
    status EmpressoraStatus @default(DESATIVA)
    numero_impressora String
    impressoes Impressao[]
    @@map("impressoras")
}

model Impressao {
    id String @id @default(cuid())
    impressora_id String @db.VarChar(256)
    user_id String @db.VarChar(256)
    data_impressao DateTime @default(now())
    nome_documento String @db.VarChar(256)
    numero_paginas Int
    user User @relation(fields: [user_id], references: [id])
    impressora Impressora @relation(fields: [impressora_id], references: [id])
    @@map("impressoes")
}